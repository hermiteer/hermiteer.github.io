<html>
    <head>
        <script type="text/javascript">
            window.addEventListener('DOMContentLoaded', (event) => {

                // assemble params into url, then redirect
                const params = new URLSearchParams(window.location.search)
                const code = params.get("code")
                const scope = params.get("scope")
                const state = params.get("state")
                const url = "RMBLMNK2://oauth-callback?code=" + code + "&scope=" + scope + "&state=" + state
                document.getElementById("url").innerHTML = url
                window.location.assign(url)

                // copy authorization URL
                var copyURLButton = document.getElementById("copy-url-button")
                copyURLButton.addEventListener('click', function() {
                    window.navigator.clipboard.writeText(url)
                });

                // copy authorization code
                var copyCodeButton = document.getElementById("copy-code-button")
                copyCodeButton.addEventListener('click', function() {
                    window.navigator.clipboard.writeText(code)
                });
            });
        </script>
    </head>
    <body>
        <center>
            <br>
            <h2>
                Redirecting back to RMBLMNK2://oauth-callback...<br>
                <br>
                <span id="code"></span>
            </h2>
            <br>
            <input type="button" value="Copy authorization URL" id="copy-url-button"><br>
            <br>
            <input type="button" value="Copy authorization code" id="copy-code-button">
        </center>
    </body>
</html>
